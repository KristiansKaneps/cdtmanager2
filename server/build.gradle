dependencies {
    implementation project(':common'), project(':api')

    implementation "org.reflections:reflections:0.9.12"

    implementation "com.typesafe:config:1.4.0"

    implementation 'com.github.hivemq.hivemq-mqtt-client:hivemq-mqtt-client:develop-SNAPSHOT'
    implementation 'com.github.hivemq.hivemq-mqtt-client:hivemq-mqtt-client-websocket:develop-SNAPSHOT'
    implementation 'com.github.hivemq.hivemq-mqtt-client:hivemq-mqtt-client-proxy:develop-SNAPSHOT'
    implementation 'com.github.hivemq.hivemq-mqtt-client:hivemq-mqtt-client-epoll:develop-SNAPSHOT'
    implementation 'com.github.hivemq.hivemq-mqtt-client:hivemq-mqtt-client-reactor:develop-SNAPSHOT'

    implementation 'com.fasterxml.jackson.core:jackson-core:2.11.2'
    implementation 'com.fasterxml.jackson.core:jackson-annotations:2.11.2'
    implementation 'com.fasterxml.jackson.core:jackson-databind:2.11.2'

    implementation group: 'com.thoughtworks.xstream', name: 'xstream', version: '1.4.13'

    implementation group: 'io.netty', name: 'netty-all', version: '4.1.52.Final'
    implementation group: 'com.strategicgains', name: 'RestExpress', version: '0.11.3'
}

sourceSets {
    main {
        java {
            srcDir 'src/main/java'
        }
        resources {
            srcDir 'src/main/resources'
        }
    }

    test {
        java {
            srcDirs = ['src/test/java']
        }
    }
}

ext {
    javaMainClass = "lv.cecilutaka.cdtmanager2.server.Main"
}

application {
    mainClassName = javaMainClass
}

jar {
    archiveName project.parent.name + '-' + project.name + '-' + project.version + '.jar'

    manifest {
        attributes 'Main-Class': javaMainClass
    }

    from { configurations.runtimeClasspath.collect { it.isDirectory() ? it : zipTree(it) } }
}
